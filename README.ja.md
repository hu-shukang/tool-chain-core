# @tool-chain/core

[![npm version](https://img.shields.io/npm/v/@tool-chain/core.svg)](https://www.npmjs.com/package/@tool-chain/core)
[![npm downloads](https://img.shields.io/npm/dm/@tool-chain/core.svg)](https://www.npmjs.com/package/@tool-chain/core)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Node.js Version](https://img.shields.io/badge/node-%3E%3D12-brightgreen)](https://nodejs.org/)

**å¼·åŠ›ãªéåŒæœŸãƒã‚§ãƒ¼ãƒ³å®Ÿè¡Œãƒ©ã‚¤ãƒ–ãƒ©ãƒª** - ã‚¨ãƒ¬ã‚¬ãƒ³ãƒˆãªAPIã§è¤‡é›‘ãªéåŒæœŸãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚ESMã¨CommonJSåŒæ–¹ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å½¢å¼ã«å¯¾å¿œã—ã€å®Œå…¨ãªTypeScriptã‚¿ã‚¤ãƒ—ã‚»ãƒ¼ãƒ•ã¨æŸ”è»Ÿãªã‚¨ãƒ©ãƒ¼å‡¦ç†ã‚’æä¾›ã—ã¾ã™ã€‚

> éåŒæœŸæ“ä½œã‚’ç°¡æ½”ã«ã—ã¦ã€ã‚³ãƒ¼ãƒ‰ã‚’ã‚ˆã‚Šå„ªé›…ã§èª­ã¿ã‚„ã™ãä¿å®ˆã—ã‚„ã™ãã—ã¾ã™ã€‚

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

å¥½ã¿ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼š

```bash
# npm
npm install @tool-chain/core

# yarn
yarn add @tool-chain/core

# pnpm
pnpm add @tool-chain/core
```

### å¿…è¦ãªç’°å¢ƒ

- **Node.js**: >= 12.0
- **TypeScript**: >= 4.5ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€å®Œå…¨ãªã‚¿ã‚¤ãƒ—ã‚µãƒãƒ¼ãƒˆã®å ´åˆã¯æ¨å¥¨ï¼‰
- **ãƒ–ãƒ©ã‚¦ã‚¶**: ãƒ¢ãƒ€ãƒ³ãƒ–ãƒ©ã‚¦ã‚¶ï¼ˆWebpack/Rollupãªã©ã®ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ãŒå¿…è¦ï¼‰

### 30ç§’ã‚¯ã‚¤ãƒƒã‚¯ä¾‹

ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯éåŒæœŸãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ç®¡ç†ç”¨ã®2ã¤ã®å¼·åŠ›ãªãƒ„ãƒ¼ãƒ«ã‚’æä¾›ã—ã¾ã™ï¼š

#### ã‚ªãƒ—ã‚·ãƒ§ãƒ³1ï¼šChains - å…¨ã¦ã®å‰ã®ã‚¹ãƒ†ãƒƒãƒ—çµæœã«ã‚¢ã‚¯ã‚»ã‚¹

è¤‡æ•°ã®å±¥æ­´çµæœã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆã¯`Chains`ã‚’ä½¿ç”¨ï¼š

```typescript
import { Chains } from '@tool-chain/core';

const result = await new Chains()
  .chain(() => 10) // ã‚¹ãƒ†ãƒƒãƒ—1: 10ã‚’è¿”ã™ã€r1 = 10
  .chain((r) => r.r1 * 2) // ã‚¹ãƒ†ãƒƒãƒ—2: r1=10ã€20ã‚’è¿”ã™ã€r2 = 20
  .chain((r) => r.r2 + 5) // ã‚¹ãƒ†ãƒƒãƒ—3: r2=20ã€25ã‚’è¿”ã™ã€r3 = 25
  .invoke();

console.log(result); // å‡ºåŠ›: 25

// é‡è¦ãªæ¦‚å¿µ:
// - å„ã‚¹ãƒ†ãƒƒãƒ—ã¯å…¨ã¦ã®å‰ã®ã‚¹ãƒ†ãƒƒãƒ—ã®çµæœã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ï¼ˆr1, r2, r3...ï¼‰
// - r1ã¯ã‚¹ãƒ†ãƒƒãƒ—1ã®çµæœã€r2ã¯ã‚¹ãƒ†ãƒƒãƒ—2ã®çµæœãªã©
// - .invoke()ã¯ãƒã‚§ãƒ¼ãƒ³å…¨ä½“ã‚’å®Ÿè¡Œã—ã¦æœ€å¾Œã®ã‚¹ãƒ†ãƒƒãƒ—ã®çµæœã‚’è¿”ã—ã¾ã™
```

#### ã‚ªãƒ—ã‚·ãƒ§ãƒ³2ï¼šTasks - ã‚¹ãƒ†ãƒƒãƒ—é–“ã®æ¸…æ½”ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä¼é”

ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒ•ãƒ­ãƒ¼åˆ¶å¾¡ã‚’å¥½ã‚€å ´åˆã¯`Tasks`ã‚’ä½¿ç”¨ï¼š

```typescript
import { Tasks } from '@tool-chain/core';

await new Tasks()
  .addTask(async ({ next }) => {
    const data = 10;
    await next(data * 2); // æ¬¡ã®ã‚¿ã‚¹ã‚¯ã«20ã‚’æ¸¡ã™
  })
  .addTask(async ({ param, next }) => {
    // param = 20ï¼ˆå‰ã®ã‚¿ã‚¹ã‚¯ã‹ã‚‰ï¼‰
    await next(param + 5); // æ¬¡ã®ã‚¿ã‚¹ã‚¯ã«25ã‚’æ¸¡ã™
  })
  .addTask(async ({ param }) => {
    console.log(param); // å‡ºåŠ›: 25
  })
  .invoke();
```

ã“ã‚Œã ã‘ã§ã™ï¼åŸºæœ¬ã‚’ç¿’å¾—ã—ã¾ã—ãŸã€‚ç¶šã‘ã¦ã‚‚ã£ã¨å¼·åŠ›ãªæ©Ÿèƒ½ã‚’å­¦ã³ã€ã©ã®ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã†ã¹ãã‹ç†è§£ã—ã¾ã—ã‚‡ã†ã€‚

## âœ¨ ä¸»ãªæ©Ÿèƒ½

### ğŸ”— **2ã¤ã®å¼·åŠ›ãªå®Ÿè¡Œãƒ‘ã‚¿ãƒ¼ãƒ³**

#### Chains - è¤‡æ•°çµæœã¸ã®ã‚¢ã‚¯ã‚»ã‚¹

- `.chain()`ãƒ¡ã‚½ãƒƒãƒ‰ã§éåŒæœŸãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’æ§‹ç¯‰
- å…¨ã¦ã®å±¥æ­´çµæœã«ã‚¢ã‚¯ã‚»ã‚¹ï¼ˆ`r1`, `r2`, `r3`...ï¼‰
- è¤‡æ•°ã®ä¸­é–“çµæœãŒå¿…è¦ãªãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã«æœ€é©

#### Tasks - ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä¼é”

- `.addTask()`ãƒ¡ã‚½ãƒƒãƒ‰ã§é †åºå®Ÿè¡Œã‚¿ã‚¹ã‚¯
- `next(param)`ã§ã‚¹ãƒ†ãƒƒãƒ—é–“ã®ã‚¯ãƒªãƒ¼ãƒ³ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä¼é”
- ç·šå½¢ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã«æœ€é©

### ğŸ›¡ï¸ **æŸ”è»Ÿãªã‚¨ãƒ©ãƒ¼å‡¦ç†**

- **ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ¢ãƒ¼ãƒ‰**: ã‚¨ãƒ©ãƒ¼ã¯ç›´æ¥ã‚¹ãƒ­ãƒ¼ã€ãƒã‚§ãƒ¼ãƒ³ã‚’ä¸­æ–­
- **ã‚­ãƒ£ãƒ—ãƒãƒ£ãƒ¢ãƒ¼ãƒ‰**: `{ withoutThrow: true }`ã§ã‚¹ãƒ†ãƒƒãƒ—ã”ã¨ã«ã‚¨ãƒ©ãƒ¼ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ï¼ˆChainsã®ã¿ï¼‰
- **ãƒŸãƒƒã‚¯ã‚¹ãƒ¢ãƒ¼ãƒ‰**: åŒã˜ãƒã‚§ãƒ¼ãƒ³å†…ã§ä¸¡æ–¹ã®ã‚¨ãƒ©ãƒ¼å‡¦ç†æˆ¦ç•¥ã‚’æŸ”è»Ÿã«æ··åˆï¼ˆChainsã®ã¿ï¼‰
- **ã‚¿ã‚¹ã‚¯ã‚¨ãƒ©ãƒ¼**: ã‚¨ãƒ©ãƒ¼ã¯å³åº§ã«ä¼æ’­ã€å¾Œç¶šã‚¿ã‚¹ã‚¯åœæ­¢ï¼ˆTasksï¼‰
- try-catchã§å…¨ä½“ã‚’ãƒ©ãƒƒãƒ—ã™ã‚‹å¿…è¦ãªã—

### ğŸ¯ **ã‚¹ãƒãƒ¼ãƒˆãªãƒªãƒˆãƒ©ã‚¤ã¨ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ**

- å¤±æ•—æ™‚ã®è‡ªå‹•ãƒªãƒˆãƒ©ã‚¤ï¼ˆãƒªãƒˆãƒ©ã‚¤å›æ•°ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½ï¼‰
- æŸ”è»Ÿãªãƒªãƒˆãƒ©ã‚¤æ¡ä»¶ï¼ˆã‚¨ãƒ©ãƒ¼ã‚¿ã‚¤ãƒ—ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€ã¾ãŸã¯æ­£è¦è¡¨ç¾ï¼‰
- è¨­å®šå¯èƒ½ãªãƒªãƒˆãƒ©ã‚¤é…å»¶ï¼ˆå³åº§ã®ãƒªãƒˆãƒ©ã‚¤ã«ã‚ˆã‚‹ãƒªã‚½ãƒ¼ã‚¹æµªè²»ã‚’é˜²æ­¢ï¼‰
- å®Ÿè¡Œã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆåˆ¶å¾¡ï¼ˆé•·æ™‚é–“ã®ãƒãƒ³ã‚°é˜²æ­¢ï¼‰
- **æ³¨è¨˜**: ãƒªãƒˆãƒ©ã‚¤ã¨ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæ©Ÿèƒ½ã¯Chainsã§åˆ©ç”¨å¯èƒ½ï¼›Tasksã¯ã‚·ãƒ³ãƒ—ãƒ«ã•ã«æ³¨åŠ›

### ğŸ“Š **åˆæœŸãƒ‡ãƒ¼ã‚¿ã¨çŠ¶æ…‹ç®¡ç†**

- **Chains**: æ§‹æˆæ™‚ã«åˆæœŸãƒ‡ãƒ¼ã‚¿ã‚’æ¸¡ã™ã€ãƒã‚§ãƒ¼ãƒ³å†…ã§`r1`ã¨ã—ã¦åˆ©ç”¨å¯èƒ½
- **Tasks**: `next(param)`ã§ã‚¿ã‚¹ã‚¯é–“ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä¼é”
- å…¨ã‚¹ãƒ†ãƒƒãƒ—ã®å®Ÿè¡Œçµæœã‚’è‡ªå‹•ä¿å­˜
- æŸ”è»Ÿãªãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã¨çŠ¶æ…‹ç®¡ç†

### âœ… **å®Œå…¨ãªTypeScriptã‚µãƒãƒ¼ãƒˆ**

- å®Œå…¨ãªã‚¿ã‚¤ãƒ—å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ`.d.ts`ï¼‰
- å³æ ¼ãƒ¢ãƒ¼ãƒ‰ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«è¨­å®š
- ã‚¹ãƒãƒ¼ãƒˆãªã‚¿ã‚¤ãƒ—æ¨è«–ï¼ˆChainsã§20+ã‚¹ãƒ†ãƒƒãƒ—ã‚’ã‚µãƒãƒ¼ãƒˆï¼›Tasksã§å®Œå…¨ãªã‚¿ã‚¤ãƒ—ã‚»ãƒ¼ãƒ•ï¼‰
- å®Œç’§ãªIDEè‡ªå‹•è£œå®Œã¨ã‚¿ã‚¤ãƒ—ãƒã‚§ãƒƒã‚¯
- Tasksã§ã®ã‚¿ã‚¤ãƒ—ã‚»ãƒ¼ãƒ•ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä¼é”ã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚å®‰å…¨ã‚’ä¿è¨¼

### ğŸ“¦ **ãƒ‡ãƒ¥ã‚¢ãƒ«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚µãƒãƒ¼ãƒˆ**

- **ESM** (ES Modules) - ãƒ¢ãƒ€ãƒ³JavaScriptãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å½¢å¼
- **CommonJS** - Node.jsæ¨™æº–ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å½¢å¼
- è‡ªå‹•ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ¤œå‡ºã€æ‰‹å‹•è¨­å®šä¸è¦

## ğŸ“š è©³ç´°ãªä½¿ç”¨ã‚¬ã‚¤ãƒ‰

### åŸºæœ¬çš„ãªãƒã‚§ãƒ¼ãƒ³

ã‚·ãƒ³ãƒ—ãƒ«ãªãƒã‚§ãƒ¼ãƒ³ãƒ•ãƒ­ãƒ¼ã‚’ä½œæˆã—ã¦ã‚¹ãƒ†ãƒƒãƒ—ã”ã¨ã«ãƒ‡ãƒ¼ã‚¿ã‚’å‡¦ç†ï¼š

```typescript
import { Chains } from '@tool-chain/core';

const result = await new Chains()
  .chain(() => 10)
  .chain((r) => r.r1 * 2) // ã‚¹ãƒ†ãƒƒãƒ—1ã®çµæœã«ã‚¢ã‚¯ã‚»ã‚¹
  .chain((r) => r.r2 + 5) // ã‚¹ãƒ†ãƒƒãƒ—2ã®çµæœã«ã‚¢ã‚¯ã‚»ã‚¹
  .chain((r) => r.r3.toString()) // æ–‡å­—åˆ—ã«å¤‰æ›
  .invoke();

console.log(result); // "25"
```

**é‡è¦ãƒã‚¤ãƒ³ãƒˆ:**

- å„`.chain()`ã‚¹ãƒ†ãƒƒãƒ—ã¯å…¨ã¦ã®å‰ã®çµæœã«ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
- `r1`ã¯ã‚¹ãƒ†ãƒƒãƒ—1ã®çµæœã€`r2`ã¯ã‚¹ãƒ†ãƒƒãƒ—2ã®çµæœãªã©
- ãƒã‚§ãƒ¼ãƒ³å…¨ä½“ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã«æœ€å¾Œã«`.invoke()`ã‚’å‘¼ã¶å¿…è¦ãŒã‚ã‚Šã¾ã™

#### ãƒ•ã‚¡ã‚¯ãƒˆãƒªé–¢æ•°

`createChains()`ãƒ•ã‚¡ã‚¯ãƒˆãƒªé–¢æ•°ã§ã‚ˆã‚Šç°¡æ½”ãªã‚³ãƒ¼ãƒ‰ã‚’è¨˜è¿°ï¼š

```typescript
import { createChains } from '@tool-chain/core';

const result = await createChains()
  .chain(() => 'hello')
  .chain((r) => r.r1.toUpperCase())
  .invoke();

console.log(result); // "HELLO"
```

#### åˆæœŸãƒ‡ãƒ¼ã‚¿ã®ä½¿ç”¨

æ§‹æˆæ™‚ã«åˆæœŸãƒ‡ãƒ¼ã‚¿ã‚’æ¸¡ã™ã€ãƒã‚§ãƒ¼ãƒ³å†…ã§`r1`ã¨ã—ã¦åˆ©ç”¨å¯èƒ½ï¼š

```typescript
const result = await new Chains(100) // åˆæœŸãƒ‡ãƒ¼ã‚¿: 100
  .chain((r) => r.r1 * 2) // r1 = 100ã€200ã‚’è¿”ã™
  .chain((r) => r.r2 - 50) // r2 = 200ã€150ã‚’è¿”ã™
  .invoke();

console.log(result); // 150
```

**ä½¿ç”¨ã‚±ãƒ¼ã‚¹:**

- é–¢æ•°ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‹ã‚‰æ¸¡ã•ã‚Œã‚‹åˆæœŸãƒ‡ãƒ¼ã‚¿ã®å‡¦ç†
- å†åˆ©ç”¨å¯èƒ½ãªãƒ‡ãƒ¼ã‚¿å‡¦ç†ãƒ•ãƒ­ãƒ¼ã®æ§‹ç¯‰
- ã‚¯ãƒ©ã‚¹ãƒ¡ã‚½ãƒƒãƒ‰å†…ã§ã®ãƒã‚§ãƒ¼ãƒ³åˆæœŸåŒ–

#### ã‚¨ãƒ©ãƒ¼å‡¦ç† - æ·±æ˜ã‚Š

##### æ–¹æ³•1: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¹ãƒ­ãƒ¼æ¨¡å¼

ã‚¨ãƒ©ãƒ¼ãŒç›´æ¥ã‚¹ãƒ­ãƒ¼ã€ãƒã‚§ãƒ¼ãƒ³å®Ÿè¡Œã‚’ä¸­æ–­ã€‚try-catchã§å‡¦ç†ï¼š

```typescript
try {
  const result = await new Chains()
    .chain(() => JSON.parse('invalid')) // SyntaxErrorã‚’ã‚¹ãƒ­ãƒ¼
    .chain((r) => r.r1.name) // å®Ÿè¡Œã•ã‚Œãªã„
    .invoke();
} catch (error) {
  console.error('ãƒã‚§ãƒ¼ãƒ³å¤±æ•—:', error.message);
  // ã‚¨ãƒ©ãƒ¼å‡¦ç†
}
```

**åˆ©ç‚¹:** ã‚·ãƒ³ãƒ—ãƒ«æ˜ç¢ºã€ã‚¨ãƒ©ãƒ¼ã¯å³åº§ã«ä¸­æ–­
**æ¬ ç‚¹:** ãƒã‚§ãƒ¼ãƒ³å…¨ä½“ã‚’try-catchã§ãƒ©ãƒƒãƒ—å¿…è¦

##### æ–¹æ³•2: ã‚­ãƒ£ãƒ—ãƒãƒ£æ¨¡å¼ï¼ˆæ¨å¥¨ï¼‰

`{ withoutThrow: true }`ã§ã‚¨ãƒ©ãƒ¼ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ã—ã¦ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦ãƒ©ãƒƒãƒ—ã€ãƒã‚§ãƒ¼ãƒ³ç¶™ç¶šï¼š

```typescript
const result = await new Chains()
  .chain(() => JSON.parse('invalid'), { withoutThrow: true })
  // è¿”ã™: { error: SyntaxError, data: undefined }
  .chain((r) => {
    if (r.r1.error) {
      console.log('è§£æå¤±æ•—ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’ä½¿ç”¨');
      return { name: 'default', age: 0 };
    }
    return r.r1.data;
  })
  .chain((r) => {
    // r.r1ã¯å®‰å…¨ã«ä½¿ç”¨å¯èƒ½
    return r.r1.name.toUpperCase();
  })
  .invoke();

console.log(result); // "DEFAULT"
```

**è¿”å´å€¤ã®æ§‹é€ :**

```typescript
{
  data?: T;      // æˆåŠŸæ™‚ã®ãƒ‡ãƒ¼ã‚¿
  error?: Error; // å¤±æ•—æ™‚ã®ã‚¨ãƒ©ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
}
```

**åˆ©ç‚¹:** æŸ”è»Ÿãªã‚¨ãƒ©ãƒ¼å‡¦ç†ã€ãƒã‚§ãƒ¼ãƒ³ç¶™ç¶šã€ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å¯èƒ½
**æ¬ ç‚¹:** å„ã‚¹ãƒ†ãƒƒãƒ—ã§ã‚¨ãƒ©ãƒ¼ã‚’ãƒã‚§ãƒƒã‚¯å¿…è¦

##### æ–¹æ³•3: ãƒŸãƒƒã‚¯ã‚¹æ¨¡å¼

åŒã˜ãƒã‚§ãƒ¼ãƒ³å†…ã§ä¸¡æ–¹ã®ã‚¨ãƒ©ãƒ¼å‡¦ç†æˆ¦ç•¥ã‚’æ··åˆï¼š

```typescript
const result = await new Chains()
  // ã‚¹ãƒ†ãƒƒãƒ—1: ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£
  .chain(
    async () => {
      const resp = await fetch('/api/users');
      return resp.json();
    },
    { withoutThrow: true },
  )
  // ã‚¹ãƒ†ãƒƒãƒ—2: ã‚¨ãƒ©ãƒ¼ã‚’ãƒã‚§ãƒƒã‚¯ã€å¿…è¦ãªã‚‰ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
  .chain((r) => {
    if (r.r1.error) {
      console.log('APIå‘¼ã³å‡ºã—å¤±æ•—ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨');
      return [
        { id: 1, name: 'Alice' },
        { id: 2, name: 'Bob' },
      ];
    }
    return r.r1.data;
  })
  // ã‚¹ãƒ†ãƒƒãƒ—3: ãƒ‡ãƒ¼ã‚¿å¤‰æ›ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæ¨¡å¼ã€ã‚¨ãƒ©ãƒ¼ã‚’ã‚¹ãƒ­ãƒ¼ï¼‰
  .chain((r) => {
    return r.r1.map((user) => user.name.toUpperCase());
  })
  // ã‚¹ãƒ†ãƒƒãƒ—4: å†åº¦ã‚¨ãƒ©ãƒ¼ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£
  .chain((r) => saveToDatabase(r.r1), { withoutThrow: true })
  .invoke();
```

**é‡è¦ãªæ¦‚å¿µ:**

- å„ã‚¹ãƒ†ãƒƒãƒ—ã¯ç‹¬ç«‹ã—ã¦ã‚¨ãƒ©ãƒ¼å‡¦ç†æˆ¦ç•¥ã‚’è¨­å®šå¯èƒ½
- ã‚­ãƒ£ãƒ—ãƒãƒ£æ¨¡å¼ã®ã‚¨ãƒ©ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ä¸€è²«ã—ãŸå½¢å¼
- ãƒŸãƒƒã‚¯ã‚¹ä½¿ç”¨ã¯é‡è¦ãªãƒã‚¤ãƒ³ãƒˆã§å®ˆå‚™çš„ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã€ä»–ã®å ´æ‰€ã§ã¯ç´ æ—©ãå¤±æ•—

#### ãƒªãƒˆãƒ©ã‚¤ã¨ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ - æ·±æ˜ã‚Š

##### åŸºæœ¬çš„ãªãƒªãƒˆãƒ©ã‚¤

å¤±æ•—æ™‚ã«æŒ‡å®šå›æ•°ã®è‡ªå‹•ãƒªãƒˆãƒ©ã‚¤ï¼š

```typescript
const result = await new Chains()
  .chain(
    async () => {
      return fetch('/api/unstable').then((r) => r.json());
    },
    {
      retry: 3, // æœ€å¤§3å›ãƒªãƒˆãƒ©ã‚¤ï¼ˆåˆè¨ˆ4å›ã®è©¦è¡Œï¼‰
      retryDelay: 1000, // ãƒªãƒˆãƒ©ã‚¤é–“ã®å¾…æ©Ÿæ™‚é–“ 1ç§’
    },
  )
  .invoke();
```

**å®Ÿè¡Œãƒ•ãƒ­ãƒ¼:**

1. é–¢æ•°ã‚’å®Ÿè¡Œ
2. å¤±æ•—æ™‚ â†’ retryDelayå¾…æ©Ÿ â†’ ãƒªãƒˆãƒ©ã‚¤
3. æˆåŠŸã¾ãŸã¯ãƒªãƒˆãƒ©ã‚¤å›æ•°æ¶ˆè²»ã¾ã§ç¹°ã‚Šè¿”ã—

##### ã‚¹ãƒãƒ¼ãƒˆãªãƒªãƒˆãƒ©ã‚¤æ¡ä»¶

ç‰¹å®šã®ã‚¨ãƒ©ãƒ¼ã®ã¿ãƒªãƒˆãƒ©ã‚¤ã€ä»–ã¯ã™ãã«å¤±æ•—ï¼š

```typescript
const result = await new Chains()
  .chain(
    async () => {
      const res = await fetch('/api/data');
      if (res.status === 429) throw new Error('Rate limited');
      if (res.status === 404) throw new Error('Not found');
      return res.json();
    },
    {
      retry: 5,
      // æ–¹æ³•1: æ–‡å­—åˆ— - ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ã“ã®æ–‡å­—åˆ—ã‚’å«ã‚€å ´åˆãƒªãƒˆãƒ©ã‚¤
      retryWhen: 'Rate limited',
      retryDelay: 2000,
    },
  )
  .invoke();
```

**retryWhenãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚¿ã‚¤ãƒ—:**

```typescript
// 1. ã‚¨ãƒ©ãƒ¼ã‚¿ã‚¤ãƒ— - ãã®ã‚¨ãƒ©ãƒ¼ã‚¿ã‚¤ãƒ—ã®ã¿ãƒªãƒˆãƒ©ã‚¤
retryWhen: TypeError; // TypeErrorã®ã¿ãƒªãƒˆãƒ©ã‚¤

// 2. æ–‡å­—åˆ— - ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒã“ã®æ–‡å­—åˆ—ã‚’å«ã‚€å ´åˆãƒªãƒˆãƒ©ã‚¤
retryWhen: 'timeout'; // ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«'timeout'ã‚’å«ã‚€å ´åˆãƒªãƒˆãƒ©ã‚¤

// 3. æ­£è¦è¡¨ç¾ - ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒæ­£è¦è¡¨ç¾ã«ãƒãƒƒãƒã™ã‚‹å ´åˆãƒªãƒˆãƒ©ã‚¤
retryWhen: /timeout|Rate limited/; // ã©ã¡ã‚‰ã‹ã«ãƒãƒƒãƒã™ã‚‹å ´åˆãƒªãƒˆãƒ©ã‚¤
```

##### ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆåˆ¶å¾¡

ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒç„¡æœŸé™ã«ãƒãƒ³ã‚°ã™ã‚‹ã®ã‚’é˜²æ­¢ï¼š

```typescript
const result = await new Chains()
  .chain(
    async () => {
      return fetch('/api/slow-endpoint').then((r) => r.json());
    },
    {
      timeout: 5000, // 5ç§’ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã€è¶…éã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼
      retry: 2, // ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæ™‚ã«2å›ãƒªãƒˆãƒ©ã‚¤
      retryWhen: /timeout/, // ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæ™‚ã®ã¿ãƒªãƒˆãƒ©ã‚¤
    },
  )
  .chain((r) => {
    // 5ç§’ä»¥å†…ã«ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚’ä¿è¨¼
    return r.r1;
  })
  .invoke();
```

**ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã‚¨ãƒ©ãƒ¼ä¾‹:**

```typescript
// ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã¯ã‚¨ãƒ©ãƒ¼ã‚’ã‚¹ãƒ­ãƒ¼ï¼ˆwithoutThrowæœªè¨­å®šã®å ´åˆï¼‰
// Error: Timeout exceeded: operation took longer than 5000ms
```

#### éåŒæœŸæ“ä½œãƒã‚§ãƒ¼ãƒ³

è¤‡æ•°ã®éåŒæœŸæ“ä½œã‚’ãƒã‚§ãƒ¼ãƒ³ã€è‡ªå‹•Promiseå‡¦ç†ï¼š

```typescript
const result = await new Chains()
  // ã‚¹ãƒ†ãƒƒãƒ—1: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒªã‚¹ãƒˆã‚’å–å¾—
  .chain(async () => {
    const res = await fetch('/api/users');
    return res.json();
  })
  // ã‚¹ãƒ†ãƒƒãƒ—2: ãƒ¦ãƒ¼ã‚¶ãƒ¼è©³ç´°ã‚’å–å¾—
  .chain(async (r) => {
    const userIds = r.r1.map((u) => u.id);
    const res = await fetch(`/api/user-details?ids=${userIds.join(',')}`);
    return res.json();
  })
  // ã‚¹ãƒ†ãƒƒãƒ—3: çµæœã‚’çµåˆ
  .chain((r) => {
    return {
      users: r.r1, // ã‚¹ãƒ†ãƒƒãƒ—1ã®çµæœ
      details: r.r2, // ã‚¹ãƒ†ãƒƒãƒ—2ã®çµæœ
    };
  })
  .invoke();
```

#### åŒæœŸã¨éåŒæœŸã®æ··åˆ

åŒæœŸã¨éåŒæœŸã®æ“ä½œã‚’è‡ªç”±ã«æ··åˆï¼š

```typescript
const result = await new Chains()
  .chain(() => 10) // åŒæœŸ: åˆæœŸå€¤
  .chain(async (r) => {
    // éåŒæœŸ: APIå‘¼ã³å‡ºã—ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ
    await new Promise((resolve) => setTimeout(resolve, 100));
    return r.r1 * 2; // 20
  })
  .chain((r) => {
    // åŒæœŸ: ãƒ‡ãƒ¼ã‚¿å¤‰æ›
    return r.r2 + 5; // 25
  })
  .chain(async (r) => {
    // éåŒæœŸ: ãƒ‡ãƒ¼ã‚¿ä¿å­˜
    await saveToDatabase({ value: r.r1 });
    return r.r1;
  })
  .invoke();

console.log(result); // 25
```

### Tasks ä½¿ç”¨

`Tasks`ã‚¯ãƒ©ã‚¹ã¯ã€ã‚¿ã‚¹ã‚¯é–“ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä¼é”ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹è»½é‡ãªé †åºå®Ÿè¡Œæ–¹æ³•ã‚’æä¾›ã—ã¾ã™ã€‚å…¨ã¦ã®å‰ã®ã‚¹ãƒ†ãƒƒãƒ—çµæœã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã«æœ€é©åŒ–ã•ã‚ŒãŸ`Chains`ã¨ã¯ç•°ãªã‚Šã€`Tasks`ã¯æ˜ç¢ºãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒ•ãƒ­ãƒ¼åˆ¶å¾¡ã«ç„¦ç‚¹ã‚’å½“ã¦ã¦ã„ã¾ã™ã€‚

#### åŸºæœ¬çš„ãªã‚¿ã‚¹ã‚¯å®Ÿè¡Œ

è¤‡æ•°ã®ã‚¿ã‚¹ã‚¯ã‚’é †åºã§å®Ÿè¡Œã—ã€å„ã‚¿ã‚¹ã‚¯ãŒ`next()`ã‚’å‘¼ã³å‡ºã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’æ¬¡ã®ã‚¿ã‚¹ã‚¯ã«æ¸¡ã™ã“ã¨ãŒã§ãã¾ã™ï¼š

```typescript
import { Tasks, createTasks } from '@tool-chain/core';

await new Tasks()
  .addTask(async ({ next }) => {
    console.log('ã‚¿ã‚¹ã‚¯ 1');
    await next(); // æ¬¡ã®ã‚¿ã‚¹ã‚¯ã«ç¶šè¡Œ
  })
  .addTask(async ({ next }) => {
    console.log('ã‚¿ã‚¹ã‚¯ 2');
    await next(42); // æ¬¡ã®ã‚¿ã‚¹ã‚¯ã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¸¡ã™
  })
  .addTask<number>(async ({ param }) => {
    console.log(`ã‚¿ã‚¹ã‚¯ 3 å—ã‘å–ã£ãŸ: ${param}`); // 42
  })
  .invoke();
```

#### ã‚¿ã‚¹ã‚¯é–“ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä¼é”

å‰ã®ã‚¿ã‚¹ã‚¯ã‹ã‚‰ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚‹ã¨ã€å®Œå…¨ãªã‚¿ã‚¤ãƒ—ã‚»ãƒ¼ãƒ•ã§å‡¦ç†ã§ãã¾ã™ï¼š

```typescript
import { createTasks } from '@tool-chain/core';

await createTasks()
  .addTask<string>(async ({ next }) => {
    // ã“ã®ã‚¿ã‚¹ã‚¯ã¯æ¬¡ã®ã‚¿ã‚¹ã‚¯ã«æ–‡å­—åˆ—ã‚’æ¸¡ã™
    await next('hello');
  })
  .addTask(async ({ param, next }) => {
    // param ã¯ string ã¨ã—ã¦æ¨è«–ã•ã‚Œã‚‹ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã¯ãªã„ï¼‰
    console.log(param); // "hello"
    await next({ id: 1, name: 'Alice' });
  })
  .addTask<{ id: number; name: string }>(async ({ param }) => {
    // param ã¯ { id: number; name: string } ã¨ã—ã¦æ¨è«–ã•ã‚Œã‚‹
    console.log(param.name); // "Alice"
  })
  .invoke();
```

#### finish() ã«ã‚ˆã‚‹æ—©æœŸçµ‚äº†

ã„ã¤ã§ã‚‚`finish()`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã‚¿ã‚¹ã‚¯å®Ÿè¡Œã‚’åœæ­¢ã§ãã¾ã™ï¼š

```typescript
await new Tasks()
  .addTask(async ({ next }) => {
    console.log('ã‚¿ã‚¹ã‚¯ 1');
    await next();
  })
  .addTask(async ({ finish }) => {
    console.log('ã‚¿ã‚¹ã‚¯ 2');
    await finish(); // ã“ã“ã§åœæ­¢ã€ã‚¿ã‚¹ã‚¯ 3 ã¯å®Ÿè¡Œã•ã‚Œãªã„
  })
  .addTask(async () => {
    console.log('ã‚¿ã‚¹ã‚¯ 3'); // å®Ÿè¡Œã•ã‚Œãªã„
  })
  .invoke();
```

#### è‡ªå‹•ã‚¿ã‚¹ã‚¯çµ‚äº†

ã‚¿ã‚¹ã‚¯ãŒ`next()`ã¾ãŸã¯`finish()`ã‚’å‘¼ã³å‡ºã•ãªã„å ´åˆã€å¾Œç¶šã®ã‚¿ã‚¹ã‚¯ã¯è‡ªå‹•çš„ã«åœæ­¢ã—ã¾ã™ï¼š

```typescript
await new Tasks()
  .addTask(async ({ next }) => {
    console.log('ã‚¿ã‚¹ã‚¯ 1');
    await next();
  })
  .addTask(async () => {
    console.log('ã‚¿ã‚¹ã‚¯ 2');
    // next() ã¾ãŸã¯ finish() å‘¼ã³å‡ºã—ãªã— - è‡ªå‹•åœæ­¢
  })
  .addTask(async () => {
    console.log('ã‚¿ã‚¹ã‚¯ 3'); // å®Ÿè¡Œã•ã‚Œãªã„
  })
  .invoke();
```

#### Tasks ã§ã®ã‚¨ãƒ©ãƒ¼å‡¦ç†

ä»»æ„ã®ã‚¿ã‚¹ã‚¯ã§ã‚¹ãƒ­ãƒ¼ã•ã‚ŒãŸã‚¨ãƒ©ãƒ¼ã¯å®Ÿè¡Œã‚’åœæ­¢ã—ã¦ä¼æ’­ã—ã¾ã™ï¼š

```typescript
try {
  await new Tasks()
    .addTask(async ({ next }) => {
      console.log('ã‚¿ã‚¹ã‚¯ 1');
      await next();
    })
    .addTask(async () => {
      throw new Error('ã‚¿ã‚¹ã‚¯ 2 å¤±æ•—');
    })
    .addTask(async () => {
      console.log('ã‚¿ã‚¹ã‚¯ 3'); // å®Ÿè¡Œã•ã‚Œãªã„
    })
    .invoke();
} catch (error) {
  console.error('ã‚¨ãƒ©ãƒ¼:', error.message); // "ã‚¿ã‚¹ã‚¯ 2 å¤±æ•—"
}
```

#### ãƒ•ã‚¡ã‚¯ãƒˆãƒªé–¢æ•°

`createTasks()`ã‚’ä½¿ç”¨ã—ã¦ã‚ˆã‚Šç°¡æ½”ãªã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã“ã¨ãŒã§ãã¾ã™ï¼š

```typescript
import { createTasks } from '@tool-chain/core';

await createTasks()
  .addTask(async ({ next }) => {
    await next('ãƒ‡ãƒ¼ã‚¿');
  })
  .addTask(async ({ param }) => {
    console.log(param);
  })
  .invoke();
```

## ğŸ¯ ä¸€èˆ¬çš„ãªä½¿ç”¨ã‚±ãƒ¼ã‚¹

### ã‚·ãƒŠãƒªã‚ª1: ãƒ‡ãƒ¼ã‚¿å‡¦ç†ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³

```typescript
// æ¤œè¨¼ â†’ å¤‰æ› â†’ ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚° â†’ ä¿å­˜
const result = await new Chains(rawUserData)
  // ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼
  .chain((r) => {
    const valid = r.r1.every((u) => u.id && u.name && u.email);
    if (!valid) throw new Error('Invalid data');
    return r.r1;
  })
  // ãƒ‡ãƒ¼ã‚¿å¤‰æ›
  .chain((r) => {
    return r.r1.map((u) => ({
      id: u.id,
      name: u.name.trim(),
      email: u.email.toLowerCase(),
    }));
  })
  // ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°ï¼ˆé‡è¤‡å‰Šé™¤ï¼‰
  .chain((r) => {
    const seen = new Set();
    return r.r1.filter((u) => {
      if (seen.has(u.email)) return false;
      seen.add(u.email);
      return true;
    });
  })
  // ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä¿å­˜
  .chain(async (r) => {
    return db.users.insertMany(r.r1);
  })
  .invoke();
```

### ã‚·ãƒŠãƒªã‚ª2: APIå‘¼ã³å‡ºã—ãƒã‚§ãƒ¼ãƒ³

```typescript
// ãƒ¦ãƒ¼ã‚¶ãƒ¼å–å¾— â†’ æ¨©é™å–å¾— â†’ è¨­å®šå–å¾— â†’ çµåˆ
const userData = await new Chains()
  // ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾—
  .chain(
    async () => {
      const res = await fetch(`/api/user/${userId}`);
      return res.json();
    },
    { timeout: 5000 },
  )
  // ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¨©é™å–å¾—
  .chain(
    async (r) => {
      const res = await fetch(`/api/permissions/${r.r1.id}`);
      return res.json();
    },
    { timeout: 5000 },
  )
  // ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šå–å¾—
  .chain(
    async (r) => {
      const res = await fetch(`/api/config/${r.r1.userId}`);
      return res.json();
    },
    { timeout: 5000 },
  )
  // å…¨ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚’çµåˆ
  .chain((r) => {
    return {
      user: r.r1,
      permissions: r.r2,
      config: r.r3,
    };
  })
  .invoke();
```

## ğŸ“– å®Œå…¨ãªAPIå‚ç…§

### ã‚¯ãƒ©ã‚¹: `Chains<TResults>`

ãƒã‚§ãƒ¼ãƒ³å®Ÿè¡Œã®ãƒ¡ã‚¤ãƒ³ã‚¯ãƒ©ã‚¹ã€ãƒ¡ã‚½ãƒƒãƒ‰ãƒã‚§ãƒ¼ãƒ³ã‚’ã‚µãƒãƒ¼ãƒˆã€‚

#### ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿

```typescript
constructor(initialData?: T)
```

**ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:**

- `initialData` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³) - åˆæœŸãƒ‡ãƒ¼ã‚¿ã€ãƒã‚§ãƒ¼ãƒ³å†…ã§`r1`ã¨ã—ã¦åˆ©ç”¨å¯èƒ½

**ä¾‹:**

```typescript
// åˆæœŸãƒ‡ãƒ¼ã‚¿ãªã—
const chain = new Chains();

// åˆæœŸãƒ‡ãƒ¼ã‚¿ä»˜ã
const chain = new Chains(100);
const chain = new Chains({ name: 'John', age: 30 });
const chain = new Chains([1, 2, 3]);
```

#### ãƒ¡ã‚½ãƒƒãƒ‰: `chain<R>(fn, options?)`

ãƒã‚§ãƒ¼ãƒ³ã«å®Ÿè¡Œã‚¹ãƒ†ãƒƒãƒ—ã‚’è¿½åŠ ã€‚

**ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:**

- `fn` - å®Ÿè¡Œé–¢æ•°ã€ç½²åã¯`(results: ResultsObject) => T | Promise<T>`
- `options` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³) - `ChainOptions<T>`å‹ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ

**è¿”å´å€¤:**

- ãƒ¡ã‚½ãƒƒãƒ‰ãƒã‚§ãƒ¼ãƒ³ã®ãŸã‚æ–°ã—ã„`Chains`ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’è¿”ã™

**ä¾‹:**

```typescript
const chain = new Chains()
  .chain(() => getValue())
  .chain((r) => r.r1 + 10)
  .chain(
    async (r) => {
      const data = await fetchData();
      return data;
    },
    { timeout: 5000 },
  );
```

#### ãƒ¡ã‚½ãƒƒãƒ‰: `invoke()`

ãƒã‚§ãƒ¼ãƒ³å…¨ä½“ã‚’å®Ÿè¡Œã—ã¦æœ€çµ‚çµæœã‚’è¿”ã™ã€‚

**è¿”å´å€¤:**

- `Promise<T>` - æœ€å¾Œã®ãƒã‚§ãƒ¼ãƒ³ã‚¹ãƒ†ãƒƒãƒ—ã®æˆ»ã‚Šå€¤

**ä¾‹:**

```typescript
const result = await new Chains()
  .chain(() => 10)
  .chain((r) => r.r1 * 2)
  .invoke();

console.log(result); // 20
```

### é–¢æ•°: `createChains<T>(initialData?)`

æ–°ã—ã„Chainsã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆã™ã‚‹ãƒ•ã‚¡ã‚¯ãƒˆãƒªé–¢æ•°ã€‚

**ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:**

- `initialData` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³) - åˆæœŸãƒ‡ãƒ¼ã‚¿

**è¿”å´å€¤:**

- `Chains<[T]>` - Chainsã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹

**ä¾‹:**

```typescript
const result = await createChains(100)
  .chain((r) => r.r1 * 2)
  .invoke();

console.log(result); // 200
```

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ: `ChainOptions<T>`

`chain()`ãƒ¡ã‚½ãƒƒãƒ‰ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€‚

**ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãƒ†ãƒ¼ãƒ–ãƒ«:**

| ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£     | ã‚¿ã‚¤ãƒ—                      | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜                                                                  |
| -------------- | --------------------------- | ---------- | --------------------------------------------------------------------- |
| `withoutThrow` | `boolean`                   | `false`    | ã‚¨ãƒ©ãƒ¼ã‚’`{ data?: T; error?: Error }`ã¨ã—ã¦ã‚­ãƒ£ãƒ—ãƒãƒ£ï¼ˆã‚¹ãƒ­ãƒ¼ä»£ã‚ã‚Šï¼‰ |
| `retry`        | `number`                    | `0`        | å¤±æ•—æ™‚ã®ãƒªãƒˆãƒ©ã‚¤å›æ•°ï¼ˆ0ã¯ãƒªãƒˆãƒ©ã‚¤ãªã—ï¼‰                               |
| `retryWhen`    | `Error \| string \| RegExp` | ãªã—       | ãƒªãƒˆãƒ©ã‚¤æ¡ä»¶: ãƒãƒƒãƒæ™‚ã®ã¿ãƒªãƒˆãƒ©ã‚¤                                    |
| `retryDelay`   | `number`                    | `0`        | ãƒªãƒˆãƒ©ã‚¤é–“ã®é…å»¶ï¼ˆãƒŸãƒªç§’ï¼‰                                            |
| `timeout`      | `number`                    | ãªã—       | å®Ÿè¡Œã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼ˆãƒŸãƒªç§’ï¼‰ã€è¶…éã™ã‚‹ã¨TimeoutErrorã‚’ã‚¹ãƒ­ãƒ¼            |

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License - è©³ç´°ã¯[LICENSE](LICENSE)ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‚ç…§

## ğŸ¤ ã‚µãƒãƒ¼ãƒˆã¨ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯

- **GitHubãƒªãƒã‚¸ãƒˆãƒª** - [hu-shukang/toolchain_core](https://github.com/hu-shukang/tool-chain-core)
- **ã‚¤ã‚·ãƒ¥ãƒ¼ãƒˆãƒ©ãƒƒã‚«ãƒ¼** - [ã‚¤ã‚·ãƒ¥ãƒ¼å ±å‘Š](https://github.com/hu-shukang/tool-chain-core/issues)
- **ãƒ‡ã‚£ã‚¹ã‚«ãƒƒã‚·ãƒ§ãƒ³** - [GitHubãƒ‡ã‚£ã‚¹ã‚«ãƒƒã‚·ãƒ§ãƒ³](https://github.com/hu-shukang/tool-chain-core/discussions)
- **è‘—è€…** - HU SHUKANG

ã“ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒå½¹ã«ç«‹ã¤ãªã‚‰ã€â­ Starã‚’ãŠé¡˜ã„ã—ã¾ã™ï¼

## æ›´æ–°ãƒ­ã‚°

ãƒãƒ¼ã‚¸ãƒ§ãƒ³å±¥æ­´ã¨æ›´æ–°å†…å®¹ã«ã¤ã„ã¦ã¯[CHANGELOG.md](https://github.com/hu-shukang/tool-chain-db/blob/main/CHANGELOG.ja.md)ã‚’å‚ç…§ã€‚

---

**æœ€çµ‚æ›´æ–°: v1.1.2** | [GitHubãƒªãƒã‚¸ãƒˆãƒª](https://github.com/hu-shukang/tool-chain-core)
